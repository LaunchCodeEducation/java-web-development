<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>5.3. Special Methods &#8212; Java Web Development  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5.4. IntelliJ Generator Shortcut" href="equals-shortcut.html" />
    <link rel="prev" title="5.2. Instance and Static Methods" href="instance-and-static-methods.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
        </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">5. Classes and Objects, Part 2</a></li>
    <li class="active">5.3. Special Methods</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="special-methods">
<span id="id1"></span><h1>5.3. Special Methods<a class="headerlink" href="#special-methods" title="Permalink to this headline">¶</a></h1>
<p>Every class has a few special methods that belong to it, regardless of
whether or not we define them. Exactly <em>how</em> every class obtains these
methods will be explored in a future lesson. For now, let’s look at two
important examples of these methods.</p>
<div class="section" id="tostring">
<h2>5.3.1. <code class="docutils literal notranslate"><span class="pre">toString</span></code><a class="headerlink" href="#tostring" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">toString</span></code> method returns a string representation of a class.
Calling <code class="docutils literal notranslate"><span class="pre">toString</span></code> on a class that you’ve written will result in
something like this:</p>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<div class="highlight-Java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">Student</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;Violet&quot;</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</pre></div>
</td></tr></table></div>
<p><strong>Console Output</strong></p>
<div class="last highlight-bash notranslate"><div class="highlight"><pre><span></span>org.launchcode.java.demos.classes2.Student@61bbe9ba
</pre></div>
</div>
</div>
<p>Here, we called <code class="docutils literal notranslate"><span class="pre">toString</span></code> on a <code class="docutils literal notranslate"><span class="pre">Student</span></code> object. The default <code class="docutils literal notranslate"><span class="pre">toString</span></code>
implementation is generally not very useful. Most of the time, you’ll want to
write your own <code class="docutils literal notranslate"><span class="pre">toString</span></code> method to <em>override</em> the default and provide
better results.</p>
<p>Here’s how we might do it for <code class="docutils literal notranslate"><span class="pre">Student</span></code> to produce a much more friendly
message:</p>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&quot; (Credits: &quot;</span> <span class="o">+</span> <span class="n">numberOfCredits</span> <span class="o">+</span> <span class="s">&quot;, GPA: &quot;</span> <span class="o">+</span> <span class="n">gpa</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span><span class="o">;</span>
<span class="o">}</span>

<span class="n">Student</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;Violet&quot;</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</pre></div>
</td></tr></table></div>
<p><strong>Console Output</strong></p>
<div class="last highlight-none notranslate"><div class="highlight"><pre><span></span>Violet (Credits: 0, GPA: 0.0)
</pre></div>
</div>
</div>
<p>In the example, we define the <code class="docutils literal notranslate"><span class="pre">toString</span></code> method to return a string that
reports the class fields <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">numberOfCredits</span></code>, and <code class="docutils literal notranslate"><span class="pre">gpa</span></code> in a
clear manner.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">toString</span></code> is often implicitly called for you. For example, the
output above could have been generated by the following code, which calls
<code class="docutils literal notranslate"><span class="pre">toString</span></code> on <code class="docutils literal notranslate"><span class="pre">person</span></code> within <code class="docutils literal notranslate"><span class="pre">System.out.println</span></code>.</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">Student</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;Violet&quot;</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="equals">
<h2>5.3.2. <code class="docutils literal notranslate"><span class="pre">equals</span></code><a class="headerlink" href="#equals" title="Permalink to this headline">¶</a></h2>
<p>Suppose we have two objects of type <code class="docutils literal notranslate"><span class="pre">Student</span></code>, say <code class="docutils literal notranslate"><span class="pre">student1</span></code> and
<code class="docutils literal notranslate"><span class="pre">student2</span></code>, and we want to determine if they are equal. If we try to
compare them using <code class="docutils literal notranslate"><span class="pre">==</span></code>, we will likely get a result we did not expect. This
is because <code class="docutils literal notranslate"><span class="pre">student1</span></code> and <code class="docutils literal notranslate"><span class="pre">student2</span></code> are
<a class="reference internal" href="../data-types/more-data-types.html#reference-variable"><span class="std std-ref">reference variables</span></a>, which means they hold a
reference to, or the <em>address</em> of, the actual <code class="docutils literal notranslate"><span class="pre">Student</span></code> objects. <code class="docutils literal notranslate"><span class="pre">student1</span></code>
and <code class="docutils literal notranslate"><span class="pre">student2</span></code> evaluate as equal only when they have the same memory address.</p>
<p>To state that again: <code class="docutils literal notranslate"><span class="pre">student1</span></code> and <code class="docutils literal notranslate"><span class="pre">student2</span></code> will be equal (<code class="docutils literal notranslate"><span class="pre">==</span></code>) only
when they refer to, or point at, the exact same object. Consider the example
below, which creates two <code class="docutils literal notranslate"><span class="pre">Student</span></code> objects:</p>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<div class="highlight-Java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">Student</span> <span class="n">student1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;Maria&quot;</span><span class="o">,</span> <span class="mi">1234</span><span class="o">);</span>
<span class="n">Student</span> <span class="n">student2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;Maria&quot;</span><span class="o">,</span> <span class="mi">1234</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">student1</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="n">student1</span><span class="o">.</span><span class="na">id</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">student1</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">student2</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="n">student2</span><span class="o">.</span><span class="na">id</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">student2</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">student1</span> <span class="o">==</span> <span class="n">student2</span><span class="o">);</span>
</pre></div>
</td></tr></table></div>
<p><strong>Console Output</strong></p>
<div class="last highlight-bash notranslate"><div class="highlight"><pre><span></span>Maria, <span class="m">1234</span>: org.launchcode.java.demos.classes2.Student@3e3abc88
Maria, <span class="m">1234</span>: org.launchcode.java.demos.classes2.Student@6ce253f1
<span class="nb">false</span>
</pre></div>
</div>
</div>
<p>Even though the objects have the exact same keys and values, <code class="docutils literal notranslate"><span class="pre">student1</span></code>
and <code class="docutils literal notranslate"><span class="pre">student2</span></code> point to different memory locations. Therefore, the <code class="docutils literal notranslate"><span class="pre">==</span></code>
check returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>This is not usually how we want to compare objects. For example, we might want
to consider two <code class="docutils literal notranslate"><span class="pre">Student</span></code> objects equal if they have the same name, email, or
student ID.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method determines if one object is equal to another in this
sense. We introduced the method when discussing strings, but it also applies to
all other classes.</p>
<p>The code below shows how to use <code class="docutils literal notranslate"><span class="pre">equals()</span></code> to compare two students. Note that
they have different names but the same student ID, indicating they are
actually the same person.</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">Student</span> <span class="n">bono1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;Paul David Hewson&quot;</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
<span class="n">Student</span> <span class="n">bono2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;Bono&quot;</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>

<span class="k">if</span> <span class="o">(</span><span class="n">bono1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">bono2</span><span class="o">))</span> <span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bono1</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span>
      <span class="s">&quot; is the same as &quot;</span> <span class="o">+</span> <span class="n">bono2</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>If we don’t provide our own <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method, the default option only
considers two objects equal if they are the <em>exact same object</em>, which means
they point to the same memory address. This is identical to the behavior we see
when using the <code class="docutils literal notranslate"><span class="pre">==</span></code> operator: <code class="docutils literal notranslate"><span class="pre">bono1</span> <span class="pre">==</span> <span class="pre">bono2</span></code>.</p>
<p>In the example above we created two different <code class="docutils literal notranslate"><span class="pre">Student</span></code> objects, so the
expression <code class="docutils literal notranslate"><span class="pre">bono1.equals(bono2)</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">false</span></code>. In order to compare
two objects based on their <em>properties</em>, rather than their memory references,
we need to define our own <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method.</p>
<p>The difference between the comparison carried out by the default <code class="docutils literal notranslate"><span class="pre">equals()</span></code>
method (and by the <code class="docutils literal notranslate"><span class="pre">==</span></code> operator), and how we would like to compare our
classes, is the difference between <em>identity</em> and <em>equality</em>.</p>
<ol class="arabic simple">
<li>Two objects are <em>identical</em> if they both point to the same memory address.
In essence, they are the same object. If <code class="docutils literal notranslate"><span class="pre">object1</span></code> and <code class="docutils literal notranslate"><span class="pre">object2</span></code> are
identical, then changing one property value in <code class="docutils literal notranslate"><span class="pre">object1</span></code> also changes
that value for <code class="docutils literal notranslate"><span class="pre">object2</span></code>.</li>
<li>Two objects are <em>equal</em> if the values they store are the same at the time of
comparison. <code class="docutils literal notranslate"><span class="pre">student1</span></code> and <code class="docutils literal notranslate"><span class="pre">student2</span></code> point to different memory
addresses, but their values are all the same. Thus, we can consider them
equal, even though they are not identical.</li>
</ol>
<p id="index-0">The default <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method and the <code class="docutils literal notranslate"><span class="pre">==</span></code> operator test for <em>identity</em>,
whereas we want to test for <em>equality</em> instead. We can do so by <strong>overriding</strong>
the <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method. We will discuss overriding in more detail later, but
for now just recognize that it involves defining different behavior for an
existing method.</p>
<p>Two things can be considered <em>equal</em> even if they do NOT have all the same
values. In the case of the <code class="docutils literal notranslate"><span class="pre">Student</span></code> class, we might specify that two
<code class="docutils literal notranslate"><span class="pre">Student</span></code> objects are equal if they have the same ID numbers. We would then
write a new method definition for <code class="docutils literal notranslate"><span class="pre">equals()</span></code> as follows:</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">toBeCompared</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">Student</span> <span class="n">theStudent</span> <span class="o">=</span> <span class="o">(</span><span class="n">Student</span><span class="o">)</span> <span class="n">toBeCompared</span><span class="o">;</span>
   <span class="k">return</span> <span class="n">theStudent</span><span class="o">.</span><span class="na">getStudentId</span><span class="o">()</span> <span class="o">==</span> <span class="n">getStudentId</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Now if we evaluate <code class="docutils literal notranslate"><span class="pre">bono1.equals(bono2)</span></code> we will get a result of true,
since the student IDs match.</p>
<p>One catch of working with <code class="docutils literal notranslate"><span class="pre">equals()</span></code> is that its input parameter must be of
type <code class="docutils literal notranslate"><span class="pre">Object</span></code>, even if we’re working in a class like <code class="docutils literal notranslate"><span class="pre">Student</span></code>. The reason
why will become more clear in the next lesson, when we introduce the <code class="docutils literal notranslate"><span class="pre">Object</span></code>
class. For now, the practical implication is that we must convert, or <strong>cast</strong>,
the input <code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code> to be of type <code class="docutils literal notranslate"><span class="pre">Student</span></code> with the syntax
<code class="docutils literal notranslate"><span class="pre">(Student)</span> <span class="pre">toBeCompared</span></code>. Then we compare the converted student’s ID
(<code class="docutils literal notranslate"><span class="pre">bono2.id</span></code>) to that of the current student (<code class="docutils literal notranslate"><span class="pre">bono1.id</span></code>).</p>
<p>Here’s a visualization of the concepts of equality and identity:</p>
<p><strong>Equality</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/equality.png"><img alt="Equality" src="../../_images/equality.png" style="width: 536.0px; height: 404.8px;" /></a>
</div>
<p>When you test for equality, you look at two different objects and compare some
aspect of them to each other.</p>
<p><strong>Identity</strong></p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/identity.png"><img alt="Identity" src="../../_images/identity.png" style="width: 536.0px; height: 404.8px;" /></a>
</div>
<p>When you test for identity, you look at two variables to see if they reference
the exact same object.</p>
<div class="section" id="coding-a-new-equals-method">
<h3>5.3.2.1. Coding a New <code class="docutils literal notranslate"><span class="pre">equals</span></code> Method<a class="headerlink" href="#coding-a-new-equals-method" title="Permalink to this headline">¶</a></h3>
<p>You’ll often want to implement <code class="docutils literal notranslate"><span class="pre">equals()</span></code> yourself. When you do, be sure you
understand the best practices around how the method should behave. These are
<a class="reference external" href="https://www.sitepoint.com/implement-javas-equals-method-correctly/" target="_blank">a little more involved<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>
compared to coding a new <code class="docutils literal notranslate"><span class="pre">toString</span></code> method.</p>
<p>In fact, the <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method we defined above isn’t very good by most
Java programmers’ standards. Let’s improve it.</p>
<div class="section" id="problem-1">
<h4>5.3.2.1.1. Problem #1<a class="headerlink" href="#problem-1" title="Permalink to this headline">¶</a></h4>
<p>The method argument cannot be converted to a <code class="docutils literal notranslate"><span class="pre">Student</span></code> instance.</p>
<p>When we attempt to cast the argument <code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code> to type <code class="docutils literal notranslate"><span class="pre">Student</span></code>,
we’ll get an exception if <code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code> can’t be properly converted. This
happens if something other than a <code class="docutils literal notranslate"><span class="pre">Student</span></code> object gets passed into
<code class="docutils literal notranslate"><span class="pre">equals()</span></code>. To prevent this from happening, we’ll return <code class="docutils literal notranslate"><span class="pre">false</span></code> if
<code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code> was not created from the <code class="docutils literal notranslate"><span class="pre">Student</span></code> class. To check this, we
use the <code class="docutils literal notranslate"><span class="pre">getClass</span></code> method, which is available to every object (similarly
to <code class="docutils literal notranslate"><span class="pre">toString</span></code>).</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">toBeCompared</span><span class="o">)</span> <span class="o">{</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">toBeCompared</span><span class="o">.</span><span class="na">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">getClass</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="n">Student</span> <span class="n">theStudent</span> <span class="o">=</span> <span class="o">(</span><span class="n">Student</span><span class="o">)</span> <span class="n">toBeCompared</span><span class="o">;</span>
   <span class="k">return</span> <span class="n">theStudent</span><span class="o">.</span><span class="na">getStudentId</span><span class="o">()</span> <span class="o">==</span> <span class="n">getStudentId</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Lines 3 - 5 ensure that the two objects that we want to compare were created
from the same class.</p>
</div>
<div class="section" id="problem-2">
<h4>5.3.2.1.2. Problem #2<a class="headerlink" href="#problem-2" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code> might be <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code> is <code class="docutils literal notranslate"><span class="pre">null</span></code> then <code class="docutils literal notranslate"><span class="pre">toBeCompared.getClass()</span></code> throws an
exception. This is an easy issue to fix—just compare the object to <code class="docutils literal notranslate"><span class="pre">null</span></code>.
If the comparison evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code>, then we know the object is null and
<code class="docutils literal notranslate"><span class="pre">equals()</span></code> should return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">toBeCompared</span><span class="o">)</span> <span class="o">{</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">toBeCompared</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">toBeCompared</span><span class="o">.</span><span class="na">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">getClass</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="n">Student</span> <span class="n">theStudent</span> <span class="o">=</span> <span class="o">(</span><span class="n">Student</span><span class="o">)</span> <span class="n">toBeCompared</span><span class="o">;</span>
   <span class="k">return</span> <span class="n">theStudent</span><span class="o">.</span><span class="na">getStudentId</span><span class="o">()</span> <span class="o">==</span> <span class="n">getStudentId</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Line 3 checks <code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code> for <code class="docutils literal notranslate"><span class="pre">null</span></code>, preventing an error in line 7.
Line 7 checks the class of <code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code>, preventing an error in line 11.</p>
</div>
<div class="section" id="problem-3">
<h4>5.3.2.1.3. Problem #3<a class="headerlink" href="#problem-3" title="Permalink to this headline">¶</a></h4>
<p>The two objects to compare are <em>the same</em> object (identical).</p>
<p>This is less of a problem and more of a way to improve our <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method.
If <code class="docutils literal notranslate"><span class="pre">toBeCompared</span></code> is the same literal object that we are comparing it to,
then we can make a quick determination and save a few checks.</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">toBeCompared</span><span class="o">)</span> <span class="o">{</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">toBeCompared</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">toBeCompared</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">toBeCompared</span><span class="o">.</span><span class="na">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">getClass</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="n">Student</span> <span class="n">theStudent</span> <span class="o">=</span> <span class="o">(</span><span class="n">Student</span><span class="o">)</span> <span class="n">toBeCompared</span><span class="o">;</span>
   <span class="k">return</span> <span class="n">theStudent</span><span class="o">.</span><span class="na">getStudentId</span><span class="o">()</span> <span class="o">==</span> <span class="n">getStudentId</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Line 3 checks for identity. If <code class="docutils literal notranslate"><span class="pre">true</span></code>, then the remaining checks become
unnecessary.</p>
</div>
</div>
<div class="section" id="components-of-equals">
<span id="id2"></span><h3>5.3.2.2. Components of <code class="docutils literal notranslate"><span class="pre">equals</span></code><a class="headerlink" href="#components-of-equals" title="Permalink to this headline">¶</a></h3>
<p>Almost every <code class="docutils literal notranslate"><span class="pre">equals</span></code> method you write will look similar to the last example
above. It will contain the following segments in this order:</p>
<ol class="arabic simple">
<li><strong>Reference check:</strong> If the two objects are the same, return <code class="docutils literal notranslate"><span class="pre">true</span></code>
right away.</li>
<li><strong>Null check:</strong> If the argument is <code class="docutils literal notranslate"><span class="pre">null</span></code>, return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
<li><strong>Class check:</strong> Compare the classes of the two objects to ensure a
safe cast. Return <code class="docutils literal notranslate"><span class="pre">false</span></code> if the classes are different.</li>
<li><strong>Cast:</strong> Convert the argument to the type of our class, so getters
and other methods can be called.</li>
<li><strong>Custom comparison:</strong> Use custom logic to determine whether or not
the two objects should be considered equal. This will usually be a
comparison of properties or fields.</li>
</ol>
</div>
<div class="section" id="characteristics-of-equals">
<h3>5.3.2.3. Characteristics of <code class="docutils literal notranslate"><span class="pre">equals</span></code><a class="headerlink" href="#characteristics-of-equals" title="Permalink to this headline">¶</a></h3>
<p>Now that we know how to write an <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method, let’s look at some
characteristics that every such method should have. Following the general
outline above makes it easier to ensure that your <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method has these
characteristics.</p>
<ol class="arabic simple">
<li><strong>Reflexivity:</strong> For any non-null reference value <code class="docutils literal notranslate"><span class="pre">x</span></code>,
<code class="docutils literal notranslate"><span class="pre">x.equals(x)</span></code> should return <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
<li><strong>Symmetry:</strong> For any non-null reference values <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>,
<code class="docutils literal notranslate"><span class="pre">x.equals(y)</span></code> should return <code class="docutils literal notranslate"><span class="pre">true</span></code> if and only if <code class="docutils literal notranslate"><span class="pre">y.equals(x)</span></code> also
returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
<li><strong>Transitivity:</strong> For any non-null reference values <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, and
<code class="docutils literal notranslate"><span class="pre">z</span></code>, if <code class="docutils literal notranslate"><span class="pre">x.equals(y)</span></code> returns <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">y.equals(z)</span></code>
returns <code class="docutils literal notranslate"><span class="pre">true</span></code>, then <code class="docutils literal notranslate"><span class="pre">x.equals(z)</span></code> should return <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
<li><strong>Consistency:</strong> As long as <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> do not change
<code class="docutils literal notranslate"><span class="pre">x.equals(y)</span></code> should always return the same result.</li>
<li><strong>Non-null:</strong> For any non-null reference value <code class="docutils literal notranslate"><span class="pre">x</span></code>,
<code class="docutils literal notranslate"><span class="pre">x.equals(null)</span></code> should return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
</ol>
<p>If you think back to what your math classes had to say about equality, then
these concepts make sense.</p>
<p>Using the general approach outlined above to implement <code class="docutils literal notranslate"><span class="pre">equals()</span></code> will
make it easier to meet these characteristics. However, always check your
method! Missing one or more characteristic can be disastrous for your Java
applications.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">Seasoned Java developers will tell you that every time you implement
your own version of <code class="docutils literal notranslate"><span class="pre">equals()</span></code> you should also implement your own
version of <code class="docutils literal notranslate"><span class="pre">hashCode()</span></code>. <code class="docutils literal notranslate"><span class="pre">hashCode()</span></code> is another special method that
every class has. Understanding <code class="docutils literal notranslate"><span class="pre">hashCode()</span></code> would take us a bit far
afield at this point, but we would be remiss to not mention it. If you
want to read more, <a class="reference external" href="https://www.sitepoint.com/how-to-implement-javas-hashcode-correctly/" target="_blank">check out this
article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>
and <a class="reference external" href="https://stackoverflow.com/questions/2265503/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java" target="_blank">this stack
overflow<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
</div>
<div class="section" id="take-away">
<h3>5.3.2.4. Take Away<a class="headerlink" href="#take-away" title="Permalink to this headline">¶</a></h3>
<p>You may not need to write your own <code class="docutils literal notranslate"><span class="pre">equals()</span></code> method for every class you
create. However, as a new Java programmer, remember the following:</p>
<blockquote>
<div>Always use <code class="docutils literal notranslate"><span class="pre">equals()</span></code> to compare objects.</div></blockquote>
<p>This is especially true when working with objects of types provided by Java,
such as <code class="docutils literal notranslate"><span class="pre">String</span></code>. A class that is part of Java or a third-party library will
have implemented <code class="docutils literal notranslate"><span class="pre">equals()</span></code> in a way appropriate for the particular class,
whereas <code class="docutils literal notranslate"><span class="pre">==</span></code> will only check to see if two variables refer to the same
literal object.</p>
</div>
</div>
<div class="section" id="references">
<h2>5.3.3. References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><a class="reference external" href="https://www.sitepoint.com/implement-javas-equals-method-correctly/" target="_blank">How to Implement Java’s equals Method
Correctly<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></li>
<li><a class="reference external" href="https://www.sitepoint.com/how-to-implement-javas-hashcode-correctly/" target="_blank">How to Implement Java’s hashCode
Correctly<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></li>
</ol>
</div>
<div class="section" id="check-your-understanding">
<h2>5.3.4. Check Your Understanding<a class="headerlink" href="#check-your-understanding" title="Permalink to this headline">¶</a></h2>
<div class="admonition-question admonition">
<p class="first admonition-title"><i class="fas fa-question" aria-hidden="true"></i>Question</p>
<p>Given the code:</p>
<div class="highlight-Java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Pet</span> <span class="o">{</span>

   <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

   <span class="n">Pet</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="n">String</span> <span class="n">firstPet</span> <span class="o">=</span> <span class="s">&quot;Fluffy&quot;</span><span class="o">;</span>
<span class="n">Pet</span> <span class="n">secondPet</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pet</span><span class="o">(</span><span class="s">&quot;Fluffy&quot;</span><span class="o">);</span>
<span class="n">Pet</span> <span class="n">thirdPet</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pet</span><span class="o">(</span><span class="s">&quot;Fluffy&quot;</span><span class="o">);</span>
</pre></div>
</td></tr></table></div>
<p>Which of the following statements evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code>?</p>
<ol class="last arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">firstPet</span> <span class="pre">==</span> <span class="pre">secondPet;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">secondPet</span> <span class="pre">==</span> <span class="pre">thirdPet;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">thirdPet.equals(secondPet);</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">thirdPet.getName()</span> <span class="pre">==</span> <span class="pre">firstPet;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">thirdPet.equals(firstPet);</span></code></li>
</ol>
</div>
<div class="admonition-question admonition">
<p class="first admonition-title"><i class="fas fa-question" aria-hidden="true"></i>Question</p>
<p>We add the following code inside the <code class="docutils literal notranslate"><span class="pre">Pet</span></code> class:</p>
<div class="highlight-Java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">petToCheck</span><span class="o">)</span> <span class="o">{</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">petToCheck</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">petToCheck</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="k">if</span> <span class="o">(</span><span class="n">petToCheck</span><span class="o">.</span><span class="na">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">getClass</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="n">Pet</span> <span class="n">thePet</span> <span class="o">=</span> <span class="o">(</span><span class="n">Pet</span><span class="o">)</span> <span class="n">petToCheck</span><span class="o">;</span>
   <span class="k">return</span> <span class="n">thePet</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">==</span> <span class="n">getName</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Which of the following statements evaluated to <code class="docutils literal notranslate"><span class="pre">false</span></code> before, but now
evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code>?</p>
<ol class="last arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">firstPet</span> <span class="pre">==</span> <span class="pre">secondPet;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">secondPet</span> <span class="pre">==</span> <span class="pre">thirdPet;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">thirdPet.equals(secondPet);</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">thirdPet.getName()</span> <span class="pre">==</span> <span class="pre">firstPet;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">thirdPet.equals(firstPet);</span></code></li>
</ol>
</div>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="instance-and-static-methods.html"><span aria-hidden="true">&larr;</span> 5.2. Instance and Static Methods</a></li>
        
        
        <li class="next"><a href="equals-shortcut.html">5.4. IntelliJ Generator Shortcut <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/classes-part2/special-methods.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>