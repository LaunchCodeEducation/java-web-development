<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Assignment #3: Tech Jobs (MVC Edition) &#8212; Java Web Development  documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Thymeleaf Commands" href="../appendices/spring/thymeleaf.html" />
    <link rel="prev" title="Assignment #2: Tech Jobs (Object-Oriented Edition)" href="tech-jobs-oo.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
        </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<ol class="breadcrumb container">
    <li><a href="../index.html">Contents</a></li>
    <li class="active">Assignment #3: Tech Jobs (MVC Edition)</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="assignment-3-tech-jobs-mvc-edition">
<span id="tech-jobs-mvc"></span><h1>Assignment #3: Tech Jobs (MVC Edition)<a class="headerlink" href="#assignment-3-tech-jobs-mvc-edition" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Your first two tasks as an apprentice went well! You, Blake, and Sally built
the TechJobs console prototype and then refactored the code to move it to an
object-oriented format.</p>
<p>After demonstrating the prototype for the Company Team at LaunchCode, it
received the green light to be fully built out as a web application.</p>
<p id="index-0">The first step in this process will be to quickly develop a <a class="reference external" href="https://en.wikipedia.org/wiki/Minimum_viable_product" target="_blank">minimum viable
product<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>, or MVP. The
goal is to get a functioning web app up and running with as little work as
possible. That way, additional feedback and testing can be done early in the
development process. After that, additional behind-the-scenes work will be
carried out to fully develop the model and data side of the application.</p>
<p>For this next step in the project, you’ll be working with Carly.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/LC-Carly.png"><img alt="Carly's LaunchCode avatar." src="../_images/LC-Carly.png" style="width: 187.00000000000003px; height: 545.0500000000001px;" /></a>
</div>
<p>Carly was once a LaunchCode apprentice as well, so she knows just what
it’s like to be in your shoes. She’s done some initial work on the
project and left you some <code class="docutils literal notranslate"><span class="pre">TODO</span></code> tasks that she knows you can handle.</p>
</div>
<div class="section" id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h2>
<p>In this project, you’ll show that you can:</p>
<ol class="arabic simple">
<li>Read and understand code written by others.</li>
<li>Work within the controller and view portions of a Spring Boot application.</li>
<li>Use Thymeleaf syntax to display data within a view.</li>
<li>Create new handler methods to process form submission.</li>
</ol>
</div>
<div class="section" id="techjobs-mvc-edition">
<h2>TechJobs (MVC Edition)<a class="headerlink" href="#techjobs-mvc-edition" title="Permalink to this headline">¶</a></h2>
<p>You’ll start with some code that Carly has provided. The idea behind your
current assignment is to quickly deliver a functioning Spring Boot application,
so you’ll focus on the controllers and views.</p>
<p>In order to do this, you’ll be reusing the <code class="docutils literal notranslate"><span class="pre">JobData</span></code> class and
<code class="docutils literal notranslate"><span class="pre">job_data.csv</span></code> file from the console app. You will eventually have to go back
and rewrite the data portion of the application to make a true, database-backed
model. However, using the existing <code class="docutils literal notranslate"><span class="pre">JobData</span></code> class to provide some basic data
functionality lets you focus on the views and controllers for now.</p>
</div>
<div class="section" id="your-assignment">
<h2>Your Assignment<a class="headerlink" href="#your-assignment" title="Permalink to this headline">¶</a></h2>
<p>The list below provides a general overview of your assigned tasks. Specific
details for each part appear in the following sections, so be sure to read them
carefully as you solve each problem.</p>
<ol class="arabic simple">
<li>Review Carly’s code in the <code class="docutils literal notranslate"><span class="pre">JobData</span></code> file as well as in the existing
controllers and views.</li>
<li>As her next step, Carly created two basic templates to show lists of jobs
for each field of the data (<code class="docutils literal notranslate"><span class="pre">employer</span></code>, <code class="docutils literal notranslate"><span class="pre">location</span></code>, etc.). You will need
to add some details to these views to allow users to select and display jobs
stored in the system.</li>
<li>Finally, Carly started working on the search feature, but only got as far as
writing the code to display the search form. She’s handed the project to you
to finish the rest. You’ll add code to the controller and view to process
and display and search results.</li>
</ol>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Set up a local copy of the project:</p>
<ol class="arabic simple">
<li>Visit the <a class="reference external" href="https://github.com/LaunchCodeEducation/java-web-dev-techjobs-mvc" target="_blank">repository page<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>
for this project. Fork the repository to create a copy under your own GitHub
account.</li>
<li>Back in IntelliJ, close any open projects (after saving and committing your
work).</li>
<li>From the welcome screen, click <em>Get From Version Control</em> and then select
the <em>Git</em> option.</li>
<li>In the next panel, enter the URL for your fork, and then select the parent
directory where you want to store your project. Hit <em>Clone</em>.</li>
<li>Launch the application (via the Gradle pane, <em>Tasks &gt; Application &gt;
bootRun</em>), so you can refer to both the code as well as the running app
as you complete the assignment.</li>
</ol>
</div>
<div class="section" id="review-the-code">
<h2>1) Review the Code<a class="headerlink" href="#review-the-code" title="Permalink to this headline">¶</a></h2>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>One essential programming skill that you will develop is the ability to read
and understand someone else’s code. This assignment begins with you
practicing exactly that. Make sure you carefully examine the provided code
BEFORE you start changing things.</p>
<p class="last">Trying to “fix” a code sample before understanding how it works leads to
confusion, frustration, and a broken program. DO NOT SKIP the code review!</p>
</div>
<p>Carly created a Spring Boot application and filled in some features. She
refactored <code class="docutils literal notranslate"><span class="pre">JobData</span></code> to generate an ArrayList of <code class="docutils literal notranslate"><span class="pre">Job</span></code> objects based on
your TechJobs-OO work, and she added controllers and views for a “Home”,
“List”, and “Search” page. <code class="docutils literal notranslate"><span class="pre">JobData</span></code> now also builds ArrayLists for the <code class="docutils literal notranslate"><span class="pre">Employer</span></code>,
<code class="docutils literal notranslate"><span class="pre">Location</span></code>, <code class="docutils literal notranslate"><span class="pre">PositionType</span></code>, and <code class="docutils literal notranslate"><span class="pre">CoreCompetency</span></code> objects.</p>
<div class="section" id="the-model">
<h3>The Model<a class="headerlink" href="#the-model" title="Permalink to this headline">¶</a></h3>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">When referring to Java class locations, we’ll usually omit the leading
path: <code class="docutils literal notranslate"><span class="pre">src/main/java/org/launchcode/</span></code>.</p>
</div>
<p>The “model” is contained in the <code class="docutils literal notranslate"><span class="pre">JobData</span></code> class, which is in the <code class="docutils literal notranslate"><span class="pre">models</span></code>
package. We put “model” in quotes, since this class isn’t a model in the
typical, MVC/object-oriented sense (maybe a better name for this assignment
would be <em>TechJobs VC</em>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">JobData</span></code> class serves the same purpose as before—it reads data from
the <code class="docutils literal notranslate"><span class="pre">job_data.csv</span></code> file and stores it in a format we can use. In this case,
that format is an ArrayList of <code class="docutils literal notranslate"><span class="pre">Job</span></code> objects. Note that Carly changed the
path to the <code class="docutils literal notranslate"><span class="pre">job_data.csv</span></code> file to store it in the <code class="docutils literal notranslate"><span class="pre">src/main/resources</span></code>
directory.</p>
<p>You’ll use some of the static methods provided by <code class="docutils literal notranslate"><span class="pre">JobData</span></code> in your
controller code. Since you’re already familiar with these, we’ll leave it to
you to review their functionality as you go.</p>
</div>
<div class="section" id="the-controllers">
<h3>The Controllers<a class="headerlink" href="#the-controllers" title="Permalink to this headline">¶</a></h3>
<p>Expand the <code class="docutils literal notranslate"><span class="pre">controllers</span></code> package, and you’ll see that you have three
controllers already in place. Let’s look at these one at a time.</p>
<div class="section" id="the-homecontroller">
<h4>The <code class="docutils literal notranslate"><span class="pre">HomeController</span></code><a class="headerlink" href="#the-homecontroller" title="Permalink to this headline">¶</a></h4>
<p>This class has only one handler method, <code class="docutils literal notranslate"><span class="pre">index</span></code>, which displays the home page
for the app. The controller renders the <code class="docutils literal notranslate"><span class="pre">index.html</span></code> template (in
<code class="docutils literal notranslate"><span class="pre">src/main/resources/templates</span></code>) and provides a fairly simple view.</p>
<div class="figure">
<img alt="TechJobs MVC home screen." src="../_images/techJobsMvcHome.png" />
</div>
</div>
<div class="section" id="the-listcontroller">
<h4>The <code class="docutils literal notranslate"><span class="pre">ListController</span></code><a class="headerlink" href="#the-listcontroller" title="Permalink to this headline">¶</a></h4>
<p>This controller provides functionality for users to see either a table showing
all the options for the different <code class="docutils literal notranslate"><span class="pre">Job</span></code> fields (<code class="docutils literal notranslate"><span class="pre">employer</span></code>, <code class="docutils literal notranslate"><span class="pre">location</span></code>,
<code class="docutils literal notranslate"><span class="pre">coreCompetency</span></code>, and <code class="docutils literal notranslate"><span class="pre">positionType</span></code>) or a list of details for a selected
set of jobs.</p>
<p>If you look at the corresponding page at <code class="docutils literal notranslate"><span class="pre">/list</span></code>, you’ll see an “All” column
in the table. However, this option doesn’t work yet, and you will fully
implement that view as you work on the assignment.</p>
<p>At the top of <code class="docutils literal notranslate"><span class="pre">ListController</span></code> is a constructor that populates
<code class="docutils literal notranslate"><span class="pre">columnChoices</span></code> and <code class="docutils literal notranslate"><span class="pre">tableChoices</span></code> with values. These HashMaps play the
same role as in the console app, which is to provide a centralized collection
of the different <em>List</em> and <em>Search</em> options presented throughout the user
interface.</p>
<p><code class="docutils literal notranslate"><span class="pre">ListController</span></code> also has <code class="docutils literal notranslate"><span class="pre">list</span></code> and <code class="docutils literal notranslate"><span class="pre">listJobsByColumnAndValue</span></code> handler
methods, with routes as annotated above their definitions. The first method
renders a view that displays a table of clickable links for the different job
categories. The second method renders a different view that displays
information for the jobs that relate to a selected category. Both of the
handlers obtain data by implementing the <code class="docutils literal notranslate"><span class="pre">JobData</span></code> class methods.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">listJobsByColumnAndValue</span></code> method, the controller uses two query
parameters passed in as <code class="docutils literal notranslate"><span class="pre">column</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code> to determine what to fetch
from <code class="docutils literal notranslate"><span class="pre">JobData</span></code>. In the case of <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> it will fetch all job data,
otherwise, it will retrieve a smaller set of information. The controller then
renders the <code class="docutils literal notranslate"><span class="pre">list-jobs.html</span></code> view. We’ll explore the <code class="docutils literal notranslate"><span class="pre">list.html</span></code> and
<code class="docutils literal notranslate"><span class="pre">list-jobs.html</span></code> templates in a moment.</p>
<p><code class="docutils literal notranslate"><span class="pre">listJobsByColumnAndValue</span></code> works similarly to the search functionality, in
that we are “searching” for a particular value within a particular field and
then displaying jobs that match. However, this is slightly different from the
other way of searching in that the user will arrive at this handler method as a
result of clicking on a link within the <code class="docutils literal notranslate"><span class="pre">list</span></code> view, rather than via
submitting a form. We’ll see where these links originate when we look at the
views. Also note that the <code class="docutils literal notranslate"><span class="pre">listJobsByColumnAndValue</span></code> method deals with an
“all” scenario differently than if a user clicks one of the category links.</p>
</div>
<div class="section" id="the-searchcontroller">
<h4>The <code class="docutils literal notranslate"><span class="pre">SearchController</span></code><a class="headerlink" href="#the-searchcontroller" title="Permalink to this headline">¶</a></h4>
<p>Currently, the search controller contains only a single method, <code class="docutils literal notranslate"><span class="pre">search</span></code>.
It simply renders the form defined in the <code class="docutils literal notranslate"><span class="pre">search.html</span></code> template.</p>
<p>Later in this assignment, you will receive instructions for adding a second
handler to deal with user input and display the search results.</p>
</div>
</div>
<div class="section" id="the-views">
<h3>The Views<a class="headerlink" href="#the-views" title="Permalink to this headline">¶</a></h3>
<p>Let’s turn our attention to the views.</p>
<div class="section" id="the-fragments-file">
<h4>The <code class="docutils literal notranslate"><span class="pre">fragments</span></code> File<a class="headerlink" href="#the-fragments-file" title="Permalink to this headline">¶</a></h4>
<p>If the application is not running, launch it and navigate to the site’s home
page in your browser. Also open up the
<code class="docutils literal notranslate"><span class="pre">src/main/resources/templates/index.html</span></code> file in IntelliJ. You’ll notice
that there is a fair amount of content visible on the page that isn’t contained
in <code class="docutils literal notranslate"><span class="pre">index.html</span></code>. This is because we’re using two fragments from
<code class="docutils literal notranslate"><span class="pre">fragments.html</span></code> (<code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">page-header</span></code>). These allow for some basic
page structure and navigation to be shared across all of our views.</p>
<p>Have a look at the structure of <code class="docutils literal notranslate"><span class="pre">fragments.html</span></code>, but you will NOT need to do
any work within this file for this assignment.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>We use <a class="reference external" href="http://getbootstrap.com/" target="_blank">Twitter’s Bootstrap<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> CSS, HTML, and
JS framework to provide some styling and functionality to our views. The
appropriate files are included at the top of <code class="docutils literal notranslate"><span class="pre">fragments.html</span></code> and thus
are included on every page of our app.</p>
<p class="last">You won’t have to explicitly use Bootstrap at all in this assignment,
but it’s a great way to make your sites look good with minimal work.
Consider using it in your own projects!</p>
</div>
</div>
<div class="section" id="the-list-views">
<h4>The List Views<a class="headerlink" href="#the-list-views" title="Permalink to this headline">¶</a></h4>
<p>Turn your attention to <code class="docutils literal notranslate"><span class="pre">list.html</span></code>. This page displays a table of links
broken down into several categories. Data from <code class="docutils literal notranslate"><span class="pre">columnChoices</span></code> is used to
fill in the header row, and information stored in <code class="docutils literal notranslate"><span class="pre">tableChoices</span></code> generates
the link text.</p>
<p>The most interesting part of this template is how we generate the links:</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">td</span> <span class="na">th:each</span><span class="o">=</span><span class="s">&quot;category : ${tableChoices}&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="na">th:each</span><span class="o">=</span><span class="s">&quot;item : ${category.value}&quot;</span><span class="p">&gt;</span>
         <span class="p">&lt;</span><span class="nt">a</span> <span class="na">th:href</span><span class="o">=</span><span class="s">&quot;@{/list/jobs(column=${category.key},value=${item})}&quot;</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&quot;${item}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
   <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">tableChoices</span></code> is a HashMap from <code class="docutils literal notranslate"><span class="pre">JobData</span></code>, and it contains the names of
the <code class="docutils literal notranslate"><span class="pre">Job</span></code> fields as keys (<code class="docutils literal notranslate"><span class="pre">employer</span></code>, etc.). The value for each key is
an ArrayList of <code class="docutils literal notranslate"><span class="pre">Employer</span></code>, <code class="docutils literal notranslate"><span class="pre">Location</span></code>, <code class="docutils literal notranslate"><span class="pre">CoreCompetency</span></code>, or
<code class="docutils literal notranslate"><span class="pre">PositionType</span></code> objects.</li>
<li>In line 21, <code class="docutils literal notranslate"><span class="pre">category</span></code> represents one key/value pair from
<code class="docutils literal notranslate"><span class="pre">tableChoices</span></code>, and in line 23, <code class="docutils literal notranslate"><span class="pre">item</span></code> represents one entry from the
stored ArrayList.</li>
<li>We’ve seen the syntax <code class="docutils literal notranslate"><span class="pre">&#64;{/list/jobs}</span></code> to generate a link within a Thymleaf
template, but we haven’t seen the other portion of the link:
<code class="docutils literal notranslate"><span class="pre">(column=${category.key},value=${position})</span></code>. This syntax causes Thymeleaf
to dynamically generate query parameters for our URL.</li>
</ol>
<p>In line 24, we set these parameters by using <code class="docutils literal notranslate"><span class="pre">column=</span></code> and <code class="docutils literal notranslate"><span class="pre">value=</span></code>. The
values of these parameters are determined dynamically based on
<code class="docutils literal notranslate"><span class="pre">${category.key}</span></code> and <code class="docutils literal notranslate"><span class="pre">${item}</span></code>. Since these values come from
<code class="docutils literal notranslate"><span class="pre">tableChoices</span></code>, the <em>keys</em> will be <code class="docutils literal notranslate"><span class="pre">employer</span></code>, <code class="docutils literal notranslate"><span class="pre">location</span></code>, etc. The
<em>values</em> will be the individual elements from the related ArrayList. When the
user clicks on these links, they will be routed to the
<code class="docutils literal notranslate"><span class="pre">listJobsByColumnAndValue</span></code> handler in <code class="docutils literal notranslate"><span class="pre">ListController</span></code>, which looks for
these parameters.</p>
<p>Clicking on one of the links will display a list of jobs that relate to the
choice, via the <code class="docutils literal notranslate"><span class="pre">listJobsByColumnAndValue</span></code> handler method. However, that
view, <code class="docutils literal notranslate"><span class="pre">list-jobs.html</span></code> isn’t working yet. While the handler method is fully
implemented, the view template needs some work.</p>
<p>For now, click one of the the <em>Location</em> links. This sends a request as we
outlined above, but doing so only displays a page with a title and no job list.</p>
<p>The page you see at <code class="docutils literal notranslate"><span class="pre">/list/values?column=location&amp;value=...</span></code> is generated by
the <code class="docutils literal notranslate"><span class="pre">list-jobs.html</span></code> template. It has a similar structure as <code class="docutils literal notranslate"><span class="pre">list.html</span></code>,
but the table consists of only one column.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>Select “Kansas City” from the list of locations, and then check the address
bar of your browser:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/list/jobs?column<span class="o">=</span>location<span class="p">&amp;</span><span class="nv">value</span><span class="o">=</span>Kansas%20City
</pre></div>
</div>
<p class="last">Thymeleaf inserts <code class="docutils literal notranslate"><span class="pre">%20</span></code> for us, to represent a space, but this may
actually be hidden in your browser’s address bar.</p>
</div>
</div>
<div class="section" id="the-search-view">
<h4>The Search View<a class="headerlink" href="#the-search-view" title="Permalink to this headline">¶</a></h4>
<p>Finally, click on <em>Search</em> from the home page, or the navigation bar, and open
up <code class="docutils literal notranslate"><span class="pre">search.html</span></code> in IntelliJ. You’ll see a search form (in both the browser
and template file) that gives the user the option of searching by a given
<code class="docutils literal notranslate"><span class="pre">Job</span></code> field, or across all fields. This is an exact visual analog of our
console application.</p>
<p>This template will be used to display search results, in addition to rendering
the form. This will give the nice user experience of easily searching multiple
times in a row.</p>
</div>
</div>
<div class="section" id="wrap-up-the-code-review">
<h3>Wrap Up the Code Review<a class="headerlink" href="#wrap-up-the-code-review" title="Permalink to this headline">¶</a></h3>
<p>Once you understand the controllers and views that are already in place, you’re
ready to begin your work.</p>
<p>In IntelliJ, select <em>View &gt; Tool Windows &gt; TODO</em> to pop open a small pane at
the bottom of the window. This list is populated by any code comments that
start with <code class="docutils literal notranslate"><span class="pre">TODO</span></code>. You’ll see your tasks listed, and clicking on any one will
open the relevant file.</p>
<div class="figure">
<img alt="TechJobs MVC TODO list." src="../_images/techJobsTodos.png" />
</div>
<p>As you work on your tasks, refer to the
<a class="reference external" href="https://java-web-dev-techjobs-mvc.cfapps.io/" target="_blank">demo app<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
</div>
<div class="section" id="complete-the-list-views">
<h2>2) Complete the List Views<a class="headerlink" href="#complete-the-list-views" title="Permalink to this headline">¶</a></h2>
<p>Open the <code class="docutils literal notranslate"><span class="pre">list-jobs.html</span></code> template. Currently, the page just establishes the
navigation bar and page title. You need to add code that will present relevant
job information.</p>
<div class="section" id="display-list-of-jobs">
<h3>Display List of Jobs<a class="headerlink" href="#display-list-of-jobs" title="Permalink to this headline">¶</a></h3>
<p>This page needs to show full job listings—ID, employer, location, etc.</p>
<ol class="arabic">
<li><p class="first">In <code class="docutils literal notranslate"><span class="pre">list-jobs.html</span></code>, create a loop to display each job passed in from the
controller. The job data should be presented in a <em>table</em>. Be sure to check
in <code class="docutils literal notranslate"><span class="pre">ListController</span></code> to find the variable names available to the template.</p>
</li>
<li><p class="first">Adding the CSS class <code class="docutils literal notranslate"><span class="pre">&quot;job-listing&quot;</span></code> to a table provides some nice
styling, courtesy of Carly’s work!</p>
</li>
<li><p class="first">Construct one table, putting each job in a separate row with the fields on
separate lines. Alternatively, you can put each job in its own table, with
one job field per row.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/list-jobsTableOptions.png"><img alt="Image of the different table options." src="../_images/list-jobsTableOptions.png" style="width: 712.5999999999999px; height: 421.4px;" /></a>
</div>
</li>
<li><p class="first">Be sure to test your code by running the program and clicking links from
different categories on the <code class="docutils literal notranslate"><span class="pre">/list</span></code> page.</p>
<ol class="loweralpha simple">
<li>Clicking the <em>Web - Back End</em> link yields 6 jobs.</li>
<li><em>iOS</em> yields 4 jobs.</li>
<li><em>New York</em> yields 1 job.</li>
<li>Etc.</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="add-view-all-link">
<h3>Add <code class="docutils literal notranslate"><span class="pre">View</span> <span class="pre">All</span></code> Link<a class="headerlink" href="#add-view-all-link" title="Permalink to this headline">¶</a></h3>
<p>Open the <code class="docutils literal notranslate"><span class="pre">list.html</span></code> template. This file builds the table to display all of
the links for the different <code class="docutils literal notranslate"><span class="pre">Job</span></code> fields. However, the link for the <code class="docutils literal notranslate"><span class="pre">All</span></code>
column is missing.</p>
<div class="figure">
<img alt="Image of the ``/list`` table." src="../_images/listTableOptions.png" />
</div>
<p>You can fix this several different ways, but two options are presented below.
Note that you only need to implement ONE option, not both.</p>
<ol class="arabic simple">
<li>Modify <code class="docutils literal notranslate"><span class="pre">tableChoices</span></code> in <code class="docutils literal notranslate"><span class="pre">ListController</span></code> to include another key/value
pair. Check the method that renders the template to help identify the name
to use for the key.</li>
<li>Modify <code class="docutils literal notranslate"><span class="pre">list.html</span></code> to fill in the empty table cell with the necessary
link. Check <code class="docutils literal notranslate"><span class="pre">ListController</span></code> to help identify the data to pass in for the
query parameters.</li>
</ol>
<p>Be sure to test your code by clicking your new <em>View All</em> link in the table.
There are 98 jobs in the data file.</p>
</div>
</div>
<div class="section" id="complete-the-search-functionality">
<h2>3) Complete the Search Functionality<a class="headerlink" href="#complete-the-search-functionality" title="Permalink to this headline">¶</a></h2>
<p>Add a <code class="docutils literal notranslate"><span class="pre">displaySearchResults</span></code> handler method to <code class="docutils literal notranslate"><span class="pre">SearchController</span></code>:</p>
<ol class="arabic simple">
<li>Use the correct annotation for the method. To configure the correct mapping
type and mapping route, refer to the <code class="docutils literal notranslate"><span class="pre">form</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">search.html</span></code>
template.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">displaySearchResults</span></code> method should take in a <code class="docutils literal notranslate"><span class="pre">Model</span></code> parameter.</li>
<li>The method should also take in two other parameters, specifying the type of
search and the search term.</li>
<li>In order for these last two parameters to be properly passed in by Spring
Boot, you need to use the correct annotation. Also, you need to name them
appropriately, based on the corresponding form field names defined in
<code class="docutils literal notranslate"><span class="pre">search.html</span></code>.</li>
<li>If the user enters “all” in the search box, or if they leave the box empty,
call the <code class="docutils literal notranslate"><span class="pre">findAll()</span></code> method from <code class="docutils literal notranslate"><span class="pre">JobData</span></code>. Otherwise, send the search
information to <code class="docutils literal notranslate"><span class="pre">findByColumnAndValue</span></code>. In either case, store
the results in a <code class="docutils literal notranslate"><span class="pre">jobs</span></code> ArrayList.</li>
<li>Pass <code class="docutils literal notranslate"><span class="pre">jobs</span></code> into the <code class="docutils literal notranslate"><span class="pre">search.html</span></code> view via the <code class="docutils literal notranslate"><span class="pre">model</span></code> parameter.</li>
<li>Pass <code class="docutils literal notranslate"><span class="pre">ListController.columnChoices</span></code> into the view, as the existing
<code class="docutils literal notranslate"><span class="pre">search</span></code> handler does.</li>
</ol>
<div class="section" id="display-search-results">
<h3>Display Search Results<a class="headerlink" href="#display-search-results" title="Permalink to this headline">¶</a></h3>
<p>Once you have your <code class="docutils literal notranslate"><span class="pre">displaySearchResults</span></code> handler passing information to the
view, you need to display the data.</p>
<ol class="arabic simple">
<li>In <code class="docutils literal notranslate"><span class="pre">search.html</span></code>, create a loop to display each job passed in from the
controller.</li>
<li>Put the job results into a table, similar to what you did for the
<code class="docutils literal notranslate"><span class="pre">list-jobs</span></code> view.</li>
</ol>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>You can <em>reuse</em> the code you just wrote in <code class="docutils literal notranslate"><span class="pre">list-jobs.html</span></code> by defining a
new <em>fragment</em> in that file. Then you need to include that fragment in
<code class="docutils literal notranslate"><span class="pre">search.html</span></code>.</p>
<p class="last">For the fragment to work properly in both files, the variables passed in by
<code class="docutils literal notranslate"><span class="pre">model.addAttribute()</span></code> must use the same names.</p>
</div>
</div>
</div>
<div class="section" id="sanity-check">
<h2>Sanity Check<a class="headerlink" href="#sanity-check" title="Permalink to this headline">¶</a></h2>
<p>Before submitting, make sure that your application:</p>
<ol class="arabic simple">
<li>Displays all 98 jobs in the system when the user goes to the <code class="docutils literal notranslate"><span class="pre">/list</span></code> page
and selects “All”.</li>
<li>Displays all jobs matching a particular category when the user selects a
specific employer, location, skill, or position type from the <code class="docutils literal notranslate"><span class="pre">/list</span></code>
page.</li>
<li>Displays jobs with alternating white and gray backgrounds (this is provided
by the <code class="docutils literal notranslate"><span class="pre">&quot;job-listing&quot;</span></code> class).</li>
<li>Allows a user at <code class="docutils literal notranslate"><span class="pre">/search</span></code> to search for jobs matching a specific search
term, both within a specific category and across all categories.</li>
<li>Displays search results below the form at <code class="docutils literal notranslate"><span class="pre">/search/results</span></code>.</li>
</ol>
<p>Feel free to compare your project’s behavior to that of the
<a class="reference external" href="https://java-web-dev-techjobs-mvc.cfapps.io/" target="_blank">demo app<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
<div class="section" id="how-to-submit">
<h2>How to Submit<a class="headerlink" href="#how-to-submit" title="Permalink to this headline">¶</a></h2>
<p>To turn in your assignment and get credit, follow the
<a class="reference internal" href="how-to-submit.html#how-to-submit-work"><span class="std std-ref">submission instructions</span></a>.</p>
</div>
<div class="section" id="bonus-missions">
<h2>Bonus Missions<a class="headerlink" href="#bonus-missions" title="Permalink to this headline">¶</a></h2>
<p>Here are some additional challenges, for those willing to take them on:</p>
<ol class="arabic simple">
<li>When we select a given field to search within and then submit, our choice is
forgotten and returns to “All” by default. Modify the view template to keep
the previous search field selected when displaying the results.</li>
<li>In the tables displaying the full job data, find a way to manipulate the
font, style, capitalization, etc. without hard-coding the text. (<em>Hint:</em> We
capitalize the title string in multiple templates, so have a look around).</li>
<li>In the tables of the job results, make each value (except <code class="docutils literal notranslate"><span class="pre">name</span></code>)
hyperlinked to a new listing of all jobs with that same value. For example,
if we have a list of jobs with the <code class="docutils literal notranslate"><span class="pre">JavaScript</span></code> skill, clicking on a
location value like <code class="docutils literal notranslate"><span class="pre">Saint</span> <span class="pre">Louis</span></code> will generate a new list with all the
jobs available in that city.</li>
</ol>
<div class="section" id="super-bonus-mission">
<h3>Super Bonus Mission<a class="headerlink" href="#super-bonus-mission" title="Permalink to this headline">¶</a></h3>
<p>This is a big one! Prepare for a challenge!</p>
<p>Notice that we went to the trouble of passing in the <code class="docutils literal notranslate"><span class="pre">actionChoices</span></code>
HashMap to the view in the <code class="docutils literal notranslate"><span class="pre">HomeController.index</span></code> method. This puts the
responsibility of which actions should be presented on the controller, and not
the view. However, we didn’t go to such lengths for the navigation links
displayed on every page of the site.</p>
<p>In order to make the navigation links similarly detached, we’d need to pass
<code class="docutils literal notranslate"><span class="pre">actionChoices</span></code> in to <em>every</em> view, since the nav links are generated in
<code class="docutils literal notranslate"><span class="pre">fragments.html</span></code>. We’d have to do something like the line below in every
handler method, which would be a pain, not to mention error-prone and difficult
to update.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;actions&quot;</span><span class="o">,</span> <span class="n">actionChoices</span><span class="o">);</span>
</pre></div>
</div>
<p>Let’s fix this.</p>
<ol class="arabic simple">
<li>Make a new controller, <code class="docutils literal notranslate"><span class="pre">TechJobsController</span></code>. This new controller should
have a static HashMap, <code class="docutils literal notranslate"><span class="pre">actionChoices</span></code>. The HashMap should be populated
via a no-argument/default constructor, just like <code class="docutils literal notranslate"><span class="pre">columnChoices</span></code> is
populated in <code class="docutils literal notranslate"><span class="pre">ListController</span></code>. You do NOT need to add the <code class="docutils literal notranslate"><span class="pre">&#64;Controller</span></code>
annotation to this class.</li>
<li>Write a static method <code class="docutils literal notranslate"><span class="pre">getActionChoices</span></code> in <code class="docutils literal notranslate"><span class="pre">TechJobsController</span></code> that
returns the <code class="docutils literal notranslate"><span class="pre">actions</span></code> HashMap.</li>
<li>Add the annotation <code class="docutils literal notranslate"><span class="pre">&#64;ModelAttribute(&quot;actions&quot;)</span></code> to this method. This
annotation will cause the return value of the method to be set in the model
with key <code class="docutils literal notranslate"><span class="pre">&quot;actions&quot;</span></code> for every controller that extends
<code class="docutils literal notranslate"><span class="pre">TechJobsController</span></code>.</li>
<li>Modify every one of your other controllers to extend <code class="docutils literal notranslate"><span class="pre">TechJobsController</span></code>.</li>
<li>Modify <code class="docutils literal notranslate"><span class="pre">fragments.html</span></code> to use the passed-in action choices to generate
the navigation links.</li>
<li>Finally, update your code so that <code class="docutils literal notranslate"><span class="pre">columnChoices</span></code> also lives in
<code class="docutils literal notranslate"><span class="pre">TechJobsController</span></code>.</li>
</ol>
</div>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="tech-jobs-oo.html"><span aria-hidden="true">&larr;</span> Assignment #2: Tech Jobs (Object-Oriented Edition)</a></li>
        
        
        <li class="next"><a href="../appendices/spring/thymeleaf.html">Thymeleaf Commands <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/assignments/tech-jobs-mvc.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>